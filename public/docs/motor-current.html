<h1>Motor Current</h1>
<p>Run with:</p>
<pre><code class="language-bash">node src/j5/eg/motor-current.js
</code></pre>
<pre><code class="language-javascript">var five = require(&quot;johnny-five&quot;),
  board = new five.Board();

board.on(&quot;ready&quot;, function() {
  var motor;
  /*
    Arduino Motor Shield R3
      Motor A
        pwm: 3
        dir: 12
        brake: 9
        current: &quot;A0&quot;

      Motor B
        pwm: 11
        dir: 13
        brake: 8
        current: &quot;A1&quot;

   */

  motor = new five.Motor({
    pins: {
      pwm: 3,
      dir: 12,
      brake: 9
    },

    // The current options are passed to a new instance of Sensor
    current: {
      pin: &quot;A0&quot;,
      freq: 250,
      threshold: 10
    }
  });

  board.repl.inject({
    motor: motor
  });

  motor.current.scale([0, 3030]).on(&quot;change&quot;, function() {
    console.log(&quot;Motor A: &quot; + this.value.toFixed(2) + &quot;mA&quot;);
  });

  motor.on(&quot;start&quot;, function(err, timestamp) {
    console.log(&quot;start&quot;, timestamp);
  });

  motor.on(&quot;stop&quot;, function(err, timestamp) {
    console.log(&quot;automated stop on timer&quot;, timestamp);
  });

  motor.on(&quot;brake&quot;, function(err, timestamp) {
    console.log(&quot;automated brake on timer&quot;, timestamp);
  });

  motor.on(&quot;forward&quot;, function(err, timestamp) {
    console.log(&quot;forward&quot;, timestamp);

    // demonstrate switching to reverse after 5 seconds
    board.wait(5000, function() {
      motor.reverse(150);
    });
  });

  motor.on(&quot;reverse&quot;, function(err, timestamp) {
    console.log(&quot;reverse&quot;, timestamp);

    // demonstrate stopping after 5 seconds
    board.wait(5000, function() {

      // Apply the brake for 500ms and call stop()
      motor.brake(500);
    });
  });

  // set the motor going forward full speed
  motor.forward(255);
});

</code></pre>
<h2>License</h2>
<p>Copyright (c) 2012-2013 Rick Waldron <a href="mailto:waldron.rick@gmail.com">waldron.rick@gmail.com</a>
Licensed under the MIT license.
Copyright (c) 2014 The Johnny-Five Contributors
Licensed under the MIT license.</p>
