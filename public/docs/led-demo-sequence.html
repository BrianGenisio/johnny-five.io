<h1>Led Demo Sequence</h1>
<p>Run with:</p>
<pre><code class="language-bash">node src/j5/eg/led-demo-sequence.js
</code></pre>
<pre><code class="language-javascript">//
// Demonstrates stringing some of the LED commands together
// through the use of a &quot;demo sequence&quot; array that is
// recursively called for each step.
//

var five = require(&quot;johnny-five&quot;),
  board = new five.Board(),
  led;

// Do we want the sequence to loop?
var loop = true;

// Create a simple demo sequece that calls various
// five.Led methods with specified arguments and
// let it run for the given duration (defaults to 3 seconds).
var demoSequence = [{
  method: &quot;pulse&quot;,
  args: [1000],
  duration: 5000
}, {
  method: &quot;strobe&quot;,
  args: [500],
  duration: 3000
}, {
  method: &quot;fadeIn&quot;,
  args: [
    2000,
    function() {
      console.log(&quot;fadeIn complete!&quot;);
    }
  ],
  duration: 2500
}, {
  method: &quot;fadeOut&quot;,
  args: [
    5000,
    function() {
      console.log(&quot;fadeOut complete!&quot;);
    }
  ],
  duration: 5500
}, {
  method: &quot;brightness&quot;,
  args: [10],
  duration: 3000
}, {
  method: &quot;off&quot;
}];


// Execute a method in the demo sequence
function execute(step) {

  // Grab everything we need for this step
  var method = demoSequence[step].method;
  var args = demoSequence[step].args;
  var duration = demoSequence[step].duration || 3000;

  // Just print out what we're executing
  console.log(&quot;led.&quot; + method + &quot;(&quot; + (args ? args.join() : &quot;&quot;) + &quot;)&quot;);

  // Make the actual call to the LED
  five.Led.prototype[method].apply(led, args);

  // Increment the step
  step++;

  // If we're at the end, start over (loop==true) or exit
  if (step === demoSequence.length) {
    if (loop) {
      step = 0;
    } else {
      // We're done!
      process.exit(0);
    }
  }

  // Recursively call the next step after specified duration
  board.wait(duration, function() {
    execute(step);
  });

}


board.on(&quot;ready&quot;, function() {

  // Defaults to pin 11 (must be PWM)
  led = new five.Led(process.argv[2] || 11);

  // Kick off the first step
  execute(0);

});

</code></pre>
<h2>License</h2>
<p>Copyright (c) 2012-2013 Rick Waldron <a href="mailto:waldron.rick@gmail.com">waldron.rick@gmail.com</a>
Licensed under the MIT license.
Copyright (c) 2014 The Johnny-Five Contributors
Licensed under the MIT license.</p>
